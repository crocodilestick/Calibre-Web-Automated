{
  "pubdate": {{ entry.pubdate | string | tojson }},
  "title": {{ entry.title | tojson }},
  "format_metadata": {
  {% for format in entry.data %}
    {{ format.format | tojson }}: {
      "mtime": {{ entry.last_modified | string | tojson }},
      "size": {{ format.uncompressed_size }},
      "path": ""
    }{% if not loop.last %},{% endif %}
    {% endfor %}
  },
  "formats": [
  {% for format in entry.data %}
    {{ format.format | tojson }}{% if not loop.last %},{% endif %}
  {% endfor %}
  ],
  "series": null,
  "cover": {{ url_for('opds.feed_get_cover', book_id=entry.id) | tojson }},
  "languages": [
  {% for lang in entry.languages %}
    {{ lang.lang_code | tojson }}{% if not loop.last %},{% endif %}
  {% endfor %}
  ],
  "comments": {% if entry.comments|length > 0 %}{{ entry.comments[0].text | tojson }}{% else %}null{% endif %},
  "tags": [
  {% for tag in entry.tags %}
    {{ tag.name | tojson }}{% if not loop.last %},{% endif %}
  {% endfor %}
  ],
  "application_id": {{ entry.id }},
  "series_index": {% if entry.series|length > 0 %}{{ entry.series_index | tojson }}{% else %}null{% endif %},
  "last_modified": {{ entry.last_modified | string | tojson }},
  "author_sort": {{ entry.author_sort | tojson }},
  "uuid": {{ entry.uuid | tojson }},
  "timestamp": {{ entry.timestamp | string | tojson }},
  "thumbnail": {{ url_for('opds.feed_get_cover', book_id=entry.id) | tojson }},
  "main_format": {
    {{ entry.data[0].format|lower | tojson }}: {{ url_for('opds.opds_download_link', book_id=entry.id, book_format=entry.data[0].format|lower) | tojson }}
  },
  "rating": {% if entry.ratings.__len__() > 0 %}{{ (entry.ratings[0].rating|string + ".0") | tojson }}{% else %}0.0{% endif %},
  "authors": [
  {% for author in entry.authors %}
    {{ author.name.replace('|',',') | tojson }}{% if not loop.last %},{% endif %}
  {% endfor %}
  ],
  "publishers": [
  {% for publisher in entry.publishers %}
    {{ publisher.name | tojson }}{% if not loop.last %},{% endif %}
  {% endfor %}
  ],
  "other_formats": {
  {% if entry.data.__len__() > 1 %}
  {% for format in entry.data[1:] %}
    {{ format.format|lower | tojson }}: {{ url_for('opds.opds_download_link', book_id=entry.id, book_format=format.format|lower) | tojson }}{% if not loop.last %},{% endif %}
  {% endfor %}
  {% endif %} },
  "title_sort": {{ entry.sort | tojson }}
}
